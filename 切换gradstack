<script setup>
import { ref, onMounted, onBeforeUnmount, nextTick, watch } from 'vue'
import { GridStack } from 'gridstack'
import 'gridstack/dist/gridstack.min.css'

// ============ å¸¸é‡ ============
const LS_KEY = 'gridstack-layout'

// ============ å“åº”å¼æ•°æ® ============
const gridRef = ref(null)
const gsItems = ref([])
const addCount = ref(1)

// ============ æ–°å¢ï¼šç¼–è¾‘æ€/æµè§ˆæ€ ============
const isEditMode = ref(true)  // true: ç¼–è¾‘æ€, false: æµè§ˆæ€

// ============ GridStack å®ä¾‹ ============
let grid = null
let gsCounter = Date.now()

function generateId() {
  return String(gsCounter++)
}

// ============ é»˜è®¤å¸ƒå±€ ============
const defaultLayout = [
  { id: '1', x: 0, y: 0, w: 2, h: 2, title: 'å¡ç‰‡ 1', content: 'è¿™æ˜¯å¡ç‰‡ 1 çš„å†…å®¹ï¼Œå¯ä»¥æ”¾ç½®ä»»ä½•ä¿¡æ¯ã€‚' },
  { id: '2', x: 2, y: 0, w: 2, h: 2, title: 'å¡ç‰‡ 2', content: 'è¿™æ˜¯å¡ç‰‡ 2 çš„å†…å®¹ï¼Œæ”¯æŒæ‹–æ‹½å’Œè°ƒæ•´å¤§å°ã€‚' },
  { id: '3', x: 4, y: 0, w: 2, h: 2, title: 'å¡ç‰‡ 3', content: 'è¿™æ˜¯å¡ç‰‡ 3 çš„å†…å®¹ï¼Œåˆ‡æ¢åˆ°æµè§ˆæ€åå°†é”å®šã€‚' },
]

// ============ å·¥å…·å‡½æ•° ============

function safeParseArray(raw) {
  try {
    const data = JSON.parse(raw)
    return Array.isArray(data) ? data : []
  } catch {
    return []
  }
}

function destroyGridstackWidgetsOnly() {
  if (grid) {
    grid.removeAll(false)
  }
}

function batchMakeWidgets() {
  if (!grid || !gridRef.value) return

  grid.batchUpdate()

  gsItems.value.forEach((it) => {
    const el = gridRef.value.querySelector(`[gs-id="${it.id}"]`)
    if (!el) return
    grid.makeWidget(el)
  })

  grid.batchUpdate(false)
}

function syncFromGridstack() {
  if (!grid) return

  const nodes = grid.getGridItems()
  nodes.forEach((el) => {
    const node = el.gridstackNode
    if (!node) return

    const item = gsItems.value.find((it) => it.id === node.id)
    if (item) {
      item.x = node.x
      item.y = node.y
      item.w = node.w
      item.h = node.h
    }
  })
}

async function reloadLayoutWithData(data) {
  destroyGridstackWidgetsOnly()

  gsItems.value = []
  await nextTick()

  gsItems.value = data.map((it) => ({
    id: String(it.id),
    x: it.x,
    y: it.y,
    w: it.w,
    h: it.h,
    title: it.title ?? `å¡ç‰‡ ${it.id}`,
    content: it.content ?? '',
  }))

  updateCounterFromItems()
  await nextTick()
  batchMakeWidgets()
  
  // é‡æ–°åŠ è½½ååº”ç”¨å½“å‰æ¨¡å¼
  applyEditMode(isEditMode.value)
}

function updateCounterFromItems() {
  const nums = gsItems.value
    .map((it) => parseInt(it.id, 10))
    .filter((n) => !isNaN(n))

  if (nums.length > 0) {
    const maxId = Math.max(...nums)
    if (gsCounter <= maxId) {
      gsCounter = maxId + 1
    }
  }
}

// ============ æ–°å¢ï¼šç¼–è¾‘æ€/æµè§ˆæ€åˆ‡æ¢é€»è¾‘ ============

/**
 * åº”ç”¨ç¼–è¾‘æ¨¡å¼è®¾ç½®
 * @param {boolean} editable - true ä¸ºç¼–è¾‘æ€ï¼Œfalse ä¸ºæµè§ˆæ€
 * 
 * GridStack æä¾›çš„æ§åˆ¶æ–¹æ³•ï¼š
 * - enableMove(bool): å¯ç”¨/ç¦ç”¨æ‹–æ‹½ç§»åŠ¨
 * - enableResize(bool): å¯ç”¨/ç¦ç”¨è°ƒæ•´å¤§å°
 * - setStatic(bool): è®¾ç½®æ•´ä¸ªç½‘æ ¼ä¸ºé™æ€ï¼ˆç¦ç”¨æ‰€æœ‰äº¤äº’ï¼‰
 */
function applyEditMode(editable) {
  if (!grid) return
  
  if (editable) {
    // ç¼–è¾‘æ€ï¼šå¯ç”¨æ‹–æ‹½å’Œè°ƒæ•´å¤§å°
    grid.enableMove(true)
    grid.enableResize(true)
    // æˆ–è€…ä½¿ç”¨: grid.setStatic(false)
  } else {
    // æµè§ˆæ€ï¼šç¦ç”¨æ‹–æ‹½å’Œè°ƒæ•´å¤§å°
    grid.enableMove(false)
    grid.enableResize(false)
    // æˆ–è€…ä½¿ç”¨: grid.setStatic(true)
  }
}

/**
 * åˆ‡æ¢ç¼–è¾‘æ€/æµè§ˆæ€
 */
function toggleEditMode() {
  isEditMode.value = !isEditMode.value
}

/**
 * è¿›å…¥ç¼–è¾‘æ€
 */
function enterEditMode() {
  isEditMode.value = true
}

/**
 * è¿›å…¥æµè§ˆæ€
 */
function enterViewMode() {
  // åˆ‡æ¢å‰å…ˆåŒæ­¥æ•°æ®
  syncFromGridstack()
  isEditMode.value = false
}

// ç›‘å¬ç¼–è¾‘æ€å˜åŒ–ï¼Œè‡ªåŠ¨åº”ç”¨è®¾ç½®
watch(isEditMode, (newValue) => {
  applyEditMode(newValue)
})

// ============ æ“ä½œå‡½æ•° ============

async function addItems(count = 1) {
  // æµè§ˆæ€ä¸‹ä¸å…è®¸æ·»åŠ 
  if (!isEditMode.value) return
  
  const validCount = Math.max(1, Math.min(count, 20))
  const newItems = []

  for (let i = 0; i < validCount; i++) {
    const id = generateId()
    newItems.push({
      id,
      w: 2,
      h: 2,
      title: `å¡ç‰‡ ${id}`,
      content: '',
    })
  }

  gsItems.value.push(...newItems)
  await nextTick()

  if (grid && gridRef.value) {
    grid.batchUpdate()

    newItems.forEach((newItem) => {
      const el = gridRef.value.querySelector(`[gs-id="${newItem.id}"]`)
      if (el) {
        grid.makeWidget(el)

        const node = el.gridstackNode
        if (node) {
          newItem.x = node.x
          newItem.y = node.y
          newItem.w = node.w
          newItem.h = node.h
        }
      }
    })

    grid.batchUpdate(false)
  }
}

async function addItem() {
  await addItems(1)
}

async function addMultipleItems() {
  await addItems(addCount.value)
}

function removeItem(id) {
  // æµè§ˆæ€ä¸‹ä¸å…è®¸åˆ é™¤
  if (!isEditMode.value) return
  
  const idx = gsItems.value.findIndex((it) => it.id === id)
  if (idx === -1) return

  const el = gridRef.value?.querySelector(`[gs-id="${id}"]`)

  if (el && grid) {
    grid.removeWidget(el, false)
  }

  gsItems.value.splice(idx, 1)

  nextTick(() => {
    syncFromGridstack()
  })
}

async function clearAllItems() {
  // æµè§ˆæ€ä¸‹ä¸å…è®¸æ¸…ç©º
  if (!isEditMode.value) return
  
  if (gsItems.value.length === 0) return

  if (!confirm(`ç¡®å®šè¦åˆ é™¤æ‰€æœ‰ ${gsItems.value.length} å¼ å¡ç‰‡å—ï¼Ÿ`)) return

  if (grid) {
    grid.removeAll(false)
  }

  gsItems.value = []
}

function saveLayout() {
  syncFromGridstack()

  const data = gsItems.value.map((it) => ({
    id: it.id,
    x: it.x,
    y: it.y,
    w: it.w,
    h: it.h,
    title: it.title,
    content: it.content,
  }))

  localStorage.setItem(LS_KEY, JSON.stringify(data))
  alert('å·²ä¿å­˜å¸ƒå±€')
}

async function loadLayout() {
  const raw = localStorage.getItem(LS_KEY)
  const data = safeParseArray(raw)

  if (!data.length) {
    alert('æ‰¾ä¸åˆ°å·²ä¿å­˜çš„å¸ƒå±€')
    return
  }

  await reloadLayoutWithData(data)
  alert('å·²è½½å…¥å¸ƒå±€')
}

async function resetToDefault() {
  await reloadLayoutWithData(defaultLayout)
  alert('å·²é‡ç½®ä¸ºé»˜è®¤å¸ƒå±€')
}

// ============ ç”Ÿå‘½å‘¨æœŸ ============

onMounted(async () => {
  gsItems.value = defaultLayout.map((it) => ({ ...it }))
  updateCounterFromItems()

  await nextTick()

  grid = GridStack.init(
    {
      column: 12,
      cellHeight: 80,
      margin: 10,
      float: false,
      disableOneColumnMode: true,
    },
    gridRef.value
  )

  batchMakeWidgets()
  
  // åˆå§‹åŒ–æ—¶åº”ç”¨ç¼–è¾‘æ¨¡å¼
  applyEditMode(isEditMode.value)

  grid.on('change', (event, items) => {
    if (!items) return

    items.forEach((node) => {
      const item = gsItems.value.find((it) => it.id === node.id)
      if (item) {
        item.x = node.x
        item.y = node.y
        item.w = node.w
        item.h = node.h
      }
    })
  })
})

onBeforeUnmount(() => {
  if (grid) {
    grid.off('change')
    grid.destroy(false)
    grid = null
  }
})
</script>

<template>
  <div class="gridstack-demo">
    
    <!-- ========== æ¨¡å¼åˆ‡æ¢åŒºåŸŸ ========== -->
    <div class="mode-switcher">
      <div class="mode-indicator">
        <span class="mode-label">å½“å‰æ¨¡å¼ï¼š</span>
        <span :class="['mode-badge', isEditMode ? 'mode-edit' : 'mode-view']">
          {{ isEditMode ? 'âœï¸ ç¼–è¾‘æ€' : 'ğŸ‘ï¸ æµè§ˆæ€' }}
        </span>
      </div>
      
      <div class="mode-buttons">
        <!-- æ–¹å¼ä¸€ï¼šåˆ‡æ¢æŒ‰é’® -->
        <button class="btn btn-toggle" @click="toggleEditMode">
          <span class="icon">ğŸ”„</span>
          åˆ‡æ¢ä¸º{{ isEditMode ? 'æµè§ˆæ€' : 'ç¼–è¾‘æ€' }}
        </button>
        
        <!-- æ–¹å¼äºŒï¼šç‹¬ç«‹æŒ‰é’® -->
        <button 
          class="btn btn-edit" 
          :class="{ active: isEditMode }"
          @click="enterEditMode"
        >
          âœï¸ ç¼–è¾‘
        </button>
        <button 
          class="btn btn-view" 
          :class="{ active: !isEditMode }"
          @click="enterViewMode"
        >
          ğŸ‘ï¸ æµè§ˆ
        </button>
      </div>
    </div>
    
    <!-- ========== å·¥å…·æ ï¼ˆç¼–è¾‘æ€æ˜¾ç¤ºå®Œæ•´ï¼Œæµè§ˆæ€éšè—ç¼–è¾‘åŠŸèƒ½ï¼‰ ========== -->
    <div class="toolbar">
      
      <!-- ç¼–è¾‘åŠŸèƒ½åŒºåŸŸï¼šä»…åœ¨ç¼–è¾‘æ€æ˜¾ç¤º -->
      <template v-if="isEditMode">
        <button class="btn btn-primary" @click="addItem">
          <span class="icon">+</span> æ·»åŠ å¡ç‰‡
        </button>

        <div class="batch-add">
          <input
            v-model.number="addCount"
            type="number"
            min="1"
            max="20"
            class="count-input"
            placeholder="æ•°é‡"
          />
          <button class="btn btn-primary-alt" @click="addMultipleItems">
            <span class="icon">++</span> æ‰¹é‡æ·»åŠ 
          </button>
        </div>

        <div class="quick-add">
          <button class="btn btn-quick" @click="addItems(3)">+3</button>
          <button class="btn btn-quick" @click="addItems(5)">+5</button>
          <button class="btn btn-quick" @click="addItems(10)">+10</button>
        </div>

        <div class="divider"></div>
      </template>

      <!-- å¸ƒå±€æ“ä½œï¼šå§‹ç»ˆæ˜¾ç¤º -->
      <button class="btn btn-success" @click="saveLayout">
        <span class="icon">ğŸ’¾</span> ä¿å­˜å¸ƒå±€
      </button>
      <button class="btn btn-info" @click="loadLayout">
        <span class="icon">ğŸ“‚</span> è½½å…¥å¸ƒå±€
      </button>
      <button class="btn btn-warning" @click="resetToDefault">
        <span class="icon">ğŸ”„</span> é‡ç½®é»˜è®¤
      </button>
      
      <!-- æ¸…ç©ºåŠŸèƒ½ï¼šä»…åœ¨ç¼–è¾‘æ€æ˜¾ç¤º -->
      <button 
        v-if="isEditMode" 
        class="btn btn-danger" 
        @click="clearAllItems"
      >
        <span class="icon">ğŸ—‘ï¸</span> æ¸…ç©ºå…¨éƒ¨
      </button>
    </div>

    <!-- ========== ç»Ÿè®¡ä¿¡æ¯ ========== -->
    <div class="stats">
      <span>å½“å‰å¡ç‰‡æ•°é‡: <strong>{{ gsItems.length }}</strong></span>
      <span class="stats-divider">|</span>
      <span :class="['stats-mode', isEditMode ? 'edit' : 'view']">
        {{ isEditMode ? 'å¯æ‹–æ‹½è°ƒæ•´' : 'å·²é”å®š' }}
      </span>
    </div>

    <!-- ========== GridStack ç½‘æ ¼ ========== -->
    <div 
      ref="gridRef" 
      class="grid-stack"
      :class="{ 'view-mode': !isEditMode }"
    >
      <div
        v-for="item in gsItems"
        :key="item.id"
        class="grid-stack-item"
        :gs-id="item.id"
        :gs-x="item.x"
        :gs-y="item.y"
        :gs-w="item.w"
        :gs-h="item.h"
      >
        <div class="grid-stack-item-content">
          <div class="card-header">
            <span class="card-title">{{ item.title }}</span>
            <!-- å…³é—­æŒ‰é’®ï¼šä»…åœ¨ç¼–è¾‘æ€æ˜¾ç¤º -->
            <button
              v-if="isEditMode"
              class="close-btn"
              @click.stop="removeItem(item.id)"
              title="åˆ é™¤å¡ç‰‡"
            >
              Ã—
            </button>
            <!-- æµè§ˆæ€æ˜¾ç¤ºé”å®šå›¾æ ‡ -->
            <span v-else class="lock-icon" title="æµè§ˆæ¨¡å¼ï¼Œå·²é”å®š">
              ğŸ”’
            </span>
          </div>
          <div class="card-body">
            <p v-if="item.content">{{ item.content }}</p>
            <p v-else class="placeholder">
              {{ isEditMode ? 'æ‹–æ‹½è°ƒæ•´ä½ç½®å’Œå¤§å°' : 'æµè§ˆæ¨¡å¼' }}
            </p>
          </div>
          <div class="card-footer">
            <small>
              ID: {{ item.id }} |
              ä½ç½®: ({{ item.x ?? '-' }}, {{ item.y ?? '-' }}) |
              å¤§å°: {{ item.w }}Ã—{{ item.h }}
            </small>
          </div>
        </div>
      </div>
    </div>
    
    <!-- ========== æ¨¡å¼è¯´æ˜ ========== -->
    <div class="mode-description">
      <div v-if="isEditMode" class="desc-edit">
        <strong>ğŸ“ ç¼–è¾‘æ¨¡å¼</strong>
        <ul>
          <li>æ‹–æ‹½å¡ç‰‡æ ‡é¢˜æ å¯ç§»åŠ¨ä½ç½®</li>
          <li>æ‹–æ‹½å¡ç‰‡è¾¹ç¼˜å¯è°ƒæ•´å¤§å°</li>
          <li>ç‚¹å‡» Ã— æŒ‰é’®å¯åˆ é™¤å¡ç‰‡</li>
          <li>å¯æ·»åŠ æ–°å¡ç‰‡</li>
        </ul>
      </div>
      <div v-else class="desc-view">
        <strong>ğŸ‘ï¸ æµè§ˆæ¨¡å¼</strong>
        <ul>
          <li>å¸ƒå±€å·²é”å®šï¼Œæ— æ³•ç§»åŠ¨æˆ–è°ƒæ•´</li>
          <li>æ— æ³•æ·»åŠ æˆ–åˆ é™¤å¡ç‰‡</li>
          <li>é€‚åˆæœ€ç»ˆå±•ç¤ºä½¿ç”¨</li>
        </ul>
      </div>
    </div>
  </div>
</template>

<style scoped>
.gridstack-demo {
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* ============================================
   æ¨¡å¼åˆ‡æ¢åŒºåŸŸ
   ============================================ */
.mode-switcher {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 15px;
  margin-bottom: 20px;
  padding: 15px 20px;
  background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
  border-radius: 12px;
  border: 2px solid #667eea30;
}

.mode-indicator {
  display: flex;
  align-items: center;
  gap: 10px;
}

.mode-label {
  font-size: 14px;
  color: #666;
}

.mode-badge {
  padding: 8px 16px;
  border-radius: 20px;
  font-weight: 600;
  font-size: 14px;
  transition: all 0.3s;
}

.mode-edit {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
}

.mode-view {
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
  color: white;
  box-shadow: 0 4px 15px rgba(17, 153, 142, 0.4);
}

.mode-buttons {
  display: flex;
  gap: 10px;
}

.btn-toggle {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  color: white;
}

.btn-edit {
  background: #e0e0e0;
  color: #666;
}

.btn-edit.active {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.btn-view {
  background: #e0e0e0;
  color: #666;
}

.btn-view.active {
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
  color: white;
}

/* ============================================
   å·¥å…·æ 
   ============================================ */
.toolbar {
  margin-bottom: 20px;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 10px;
}

.batch-add {
  display: flex;
  align-items: center;
  gap: 6px;
}

.count-input {
  width: 60px;
  padding: 10px 8px;
  border: 2px solid #667eea;
  border-radius: 6px;
  font-size: 14px;
  text-align: center;
  outline: none;
}

.count-input:focus {
  border-color: #764ba2;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
}

.quick-add {
  display: flex;
  gap: 4px;
}

.btn-quick {
  padding: 10px 14px;
  background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
  color: #333;
  font-weight: 600;
}

.divider {
  width: 1px;
  height: 36px;
  background: #ddd;
  margin: 0 5px;
}

/* ============================================
   ç»Ÿè®¡ä¿¡æ¯
   ============================================ */
.stats {
  margin-bottom: 15px;
  padding: 10px 15px;
  background: #f0f4f8;
  border-radius: 8px;
  font-size: 14px;
  color: #555;
  display: flex;
  align-items: center;
  gap: 10px;
}

.stats strong {
  color: #667eea;
  font-size: 18px;
}

.stats-divider {
  color: #ccc;
}

.stats-mode {
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
}

.stats-mode.edit {
  background: #667eea20;
  color: #667eea;
}

.stats-mode.view {
  background: #11998e20;
  color: #11998e;
}

/* ============================================
   æŒ‰é’®æ ·å¼
   ============================================ */
.btn {
  padding: 10px 18px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: all 0.2s;
}

.btn:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

.btn:active {
  transform: translateY(0);
}

.btn-primary {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.btn-primary-alt {
  background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
  color: white;
}

.btn-success {
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
  color: white;
}

.btn-info {
  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  color: white;
}

.btn-warning {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  color: white;
}

.btn-danger {
  background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
  color: white;
}

.icon {
  font-size: 16px;
}

/* ============================================
   GridStack ç½‘æ ¼
   ============================================ */
.grid-stack {
  background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%);
  min-height: 500px;
  border-radius: 12px;
  padding: 10px;
  transition: all 0.3s;
}

/* æµè§ˆæ€ç½‘æ ¼æ ·å¼ */
.grid-stack.view-mode {
  background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
  border: 2px solid #4caf50;
}

.grid-stack-item-content {
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  height: 100%;
  transition: all 0.3s;
}

/* æµè§ˆæ€å¡ç‰‡æ ·å¼ */
.view-mode .grid-stack-item-content {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 15px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  transition: all 0.3s;
}

/* æµè§ˆæ€å¡ç‰‡å¤´éƒ¨ */
.view-mode .card-header {
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
  cursor: default;
}

.card-title {
  font-weight: 600;
  font-size: 14px;
}

.close-btn {
  width: 24px;
  height: 24px;
  border: none;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  color: white;
  font-size: 18px;
  line-height: 1;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
}

.close-btn:hover {
  background: rgba(255, 100, 100, 0.9);
}

.lock-icon {
  font-size: 14px;
  opacity: 0.8;
}

.card-body {
  flex: 1;
  padding: 15px;
  color: #333;
  overflow: auto;
}

.card-body p {
  margin: 0;
}

.placeholder {
  color: #999;
  font-style: italic;
}

.card-footer {
  padding: 8px 15px;
  background: #f8f9fa;
  border-top: 1px solid #eee;
  color: #888;
  font-size: 11px;
}

/* ============================================
   æ¨¡å¼è¯´æ˜åŒºåŸŸ
   ============================================ */
.mode-description {
  margin-top: 20px;
  padding: 15px 20px;
  border-radius: 10px;
  font-size: 14px;
}

.desc-edit {
  background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
  border-left: 4px solid #667eea;
}

.desc-view {
  background: linear-gradient(135deg, #11998e15 0%, #38ef7d15 100%);
  border-left: 4px solid #11998e;
}

.mode-description strong {
  display: block;
  margin-bottom: 10px;
  font-size: 16px;
}

.mode-description ul {
  margin: 0;
  padding-left: 20px;
}

.mode-description li {
  margin: 5px 0;
  color: #555;
}
</style>